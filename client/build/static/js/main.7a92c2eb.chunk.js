(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(34),r=n.n(o),c=n(14),s=n(20),i=n(35),u=n(1),m=n(2),h=n(4),d=n(3),g=n(5),f=n(10),p=n.n(f),E={googleLogin:function(){window.open("http://localhost:3001/api/google","_self")},checkUser:function(){return console.log("get user api"),p.a.get("/api/checkuser")},logout:function(){return console.log("in logout"),p.a.get("/api/logout")},localSignup:function(e){return console.log("in signup"),p.a.post("/api/signup",e)},localLogin:function(e){return console.log("in login"),p.a.post("/api/localLogin",e)}},b=(n(31),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).googleLogin=function(e){console.log("in google button press"),E.googleLogin()},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{class:"col"},l.a.createElement("a",{href:"#",class:"fb btn"},l.a.createElement("i",{class:"fa fa-facebook fa-fw"})," Login with Facebook"),l.a.createElement("a",{href:"#",class:"twitter btn"},l.a.createElement("i",{class:"fa fa-twitter fa-fw"})," Login with Twitter"),l.a.createElement("a",{href:"#",class:"google btn",onClick:this.googleLogin},l.a.createElement("i",{class:"fa fa-google fa-fw"})," Login with Google+"))}}]),t}(a.Component)),k=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={user:null,redirect:""},n.checkUser=function(){E.checkUser().then(function(e){console.log(e),"NoUser"===e.data?console.log("in redirect"):(console.log("in setstate"),n.setState({user:e.data.user.username}))}).catch(function(e){return console.log(e)})},n.logout=function(){E.logout().then(function(){n.setState({user:null,redirect:"Yes"})})},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.checkUser()}},{key:"render",value:function(){return this.state.redirect?l.a.createElement(s.a,{to:"/home"}):l.a.createElement("nav",null,l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"#",className:"brand-logo avatar"},l.a.createElement("img",{src:"../assets/animal-kingdom.png"})),l.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},l.a.createElement("li",null,this.state.user?l.a.createElement("a",{onClick:this.logout},"Logout"):l.a.createElement("a",{onClick:function(){return window.location="/login"}},"Login")),l.a.createElement("li",null,this.state.user?l.a.createElement("li",null,l.a.createElement("a",{onClick:function(){return window.location="/home"}},"Chat")):l.a.createElement("li",null,l.a.createElement("a",{href:"#"}))),l.a.createElement("li",null,this.state.user?l.a.createElement("li",null,l.a.createElement("a",{onClick:function(){return window.location="/history"}},"History")):l.a.createElement("li",null,l.a.createElement("a",{href:"#"}))),l.a.createElement("li",{className:"active"},l.a.createElement("a",{href:"#"},"User: ",this.state.user)))))}}]),t}(a.Component),y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={showGoogle:"",redirect:"",currentView:"logIn",username:"",password:"",email:"",message:"",loginmessage:""},n.handleInputChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(i.a)({},a,l))},n.handleFormSubmit=function(e){e.preventDefault(),E.localSignup({username:n.state.username,email:n.state.email,password:n.state.password}).then(function(e){console.log("in react front after signup call:"+e.data),"UserExist"===e.data?(n.setState({message:"User Exist"}),n.setState({currentView:"signUp"})):n.setState({redirect:"Yes"})})},n.locallogin=function(e){e.preventDefault(),E.localLogin({username:n.state.username,password:n.state.password}).then(function(e){"LoginFailed"===e.data?(n.setState({loginmessage:"Username/password combination failed"}),n.setState({currentView:"logIn"})):n.setState({redirect:"Yes"})})},n.checkUser=function(){E.checkUser().then(function(e){console.log(e),"NoUser"!==e.data&&(console.log("in redirect"),n.setState({redirect:"Yes"}))}).catch(function(e){return console.log(e)})},n.changeView=function(e){n.setState({currentView:e})},n.currentView=function(){switch(n.state.currentView){case"signUp":return l.a.createElement("form",{onSubmit:n.handleFormSubmit},">",l.a.createElement("h2",null,"Sign Up!"),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Create Account"),l.a.createElement("ul",null,l.a.createElement("h6",{className:"message"},n.state.message),l.a.createElement("li",null,l.a.createElement("label",{for:"username"},"Username:"),l.a.createElement("input",{type:"text",id:"username",required:!0,value:n.state.username,name:"username",onChange:n.handleInputChange,placeholder:"username"})),l.a.createElement("li",null,l.a.createElement("label",{for:"email"},"Email:"),l.a.createElement("input",{type:"email",id:"email",required:!0,value:n.state.email,name:"email",onChange:n.handleInputChange,placeholder:"email"})),l.a.createElement("li",null,l.a.createElement("label",{for:"password"},"Password:"),l.a.createElement("input",{type:"password",id:"password",required:!0,value:n.state.passworde,name:"password",onChange:n.handleInputChange,placeholder:"password"})))),l.a.createElement("button",null,"Submit"),l.a.createElement("button",{type:"button",onClick:function(){return n.changeView("logIn")}},"Have an Account?"));case"logIn":return l.a.createElement("form",{onSubmit:n.locallogin},l.a.createElement("h2",null,"Welcome Back!"),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Log In"),l.a.createElement("ul",null,l.a.createElement("h6",{className:"message"},n.state.loginmessage),l.a.createElement("li",null,l.a.createElement("label",{for:"username"},"Username:"),l.a.createElement("input",{type:"text",id:"username",required:!0,value:n.state.username,name:"username",onChange:n.handleInputChange,placeholder:"username"})),l.a.createElement("li",null,l.a.createElement("label",{for:"password"},"Password:"),l.a.createElement("input",{type:"password",id:"password",required:!0,value:n.state.passworde,name:"password",onChange:n.handleInputChange,placeholder:"password"})),l.a.createElement("li",null,l.a.createElement("i",null),l.a.createElement("a",{onClick:function(){return n.changeView("PWReset")},href:"#"},"Forgot Password?")))),l.a.createElement("button",null,"Login"),l.a.createElement("h6",null," Or Login Using..."),l.a.createElement(b,null),l.a.createElement("button",{type:"button",onClick:function(){return n.changeView("signUp")}},"Create an Account"));case"PWReset":return l.a.createElement("form",null,l.a.createElement("h2",null,"Reset Password"),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Password Reset"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("em",null,"A reset link will be sent to your inbox!")),l.a.createElement("li",null,l.a.createElement("label",{for:"email"},"Email:"),l.a.createElement("input",{type:"email",id:"email",required:!0})))),l.a.createElement("button",null,"Send Reset Link"),l.a.createElement("button",{type:"button",onClick:function(){return n.changeView("logIn")}},"Go Back"))}},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.checkUser()}},{key:"render",value:function(){return this.state.redirect?l.a.createElement(s.a,{to:"/home"}):l.a.createElement("div",null,l.a.createElement(k,null),l.a.createElement("h4",null,"Welcome to SentiBot. Please Log in."),l.a.createElement("section",{id:"entry-page"},this.currentView()),";")}}]),t}(a.Component),w=n(15),v=function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.exercise.username),l.a.createElement("td",null,e.exercise.description),l.a.createElement("td",null,e.exercise.duration),l.a.createElement("td",null,"12/2/1999"),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/edit/"+e.exercise._id},"edit")," | ",l.a.createElement("a",{href:"#",onClick:function(){e.deleteExercise(e.exercise._id)}},"delete")))},C=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).deleteExercise=n.deleteExercise.bind(Object(w.a)(Object(w.a)(n))),n.state={exercises:[]},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/exercises/").then(function(t){e.setState({exercises:t.data})}).catch(function(e){console.log(e)})}},{key:"deleteExercise",value:function(e){p.a.delete("http://localhost:5000/exercises/"+e).then(function(e){console.log(e.data)}),this.setState({exercises:this.state.exercises.filter(function(t){return t._id!==e})})}},{key:"exerciseList",value:function(){var e=this;return this.state.exercises.map(function(t){return l.a.createElement(v,{exercise:t,deleteExercise:e.deleteExercise,key:t._id})})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h3",null,"Chat History"),l.a.createElement("table",{className:"table"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,"Username"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"Duration"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,this.exerciseList())))}}]),t}(a.Component),j=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(k,null),l.a.createElement("div",{className:"container"},l.a.createElement("h4",null,"     "),l.a.createElement(C,null)))}}]),t}(a.Component),O=n(24),x=n(42),S=(n(100),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).checkUser=function(){E.checkUser().then(function(t){console.log("in setstate"),e.setState({user:t.data.user.username})}).catch(function(e){return console.log(e)})},e.state={user:"",redirect:"",messageList:[],description:"",contentCheck:!1,youCheck:!1,feelCheck:!1,whyCheck:!1,a:3,b:0,scoreCheck:!1,sentimentCheck:!1},e}return Object(g.a)(t,e),Object(m.a)(t,[{key:"_onMessageWasSent",value:function(e){var t=this;this.setState({messageList:[].concat(Object(O.a)(this.state.messageList),[e])}),p.a.post("/api/watson/analyzer",{text:e.data.text}).then(function(n){var a=n.data;console.log(n.data);var l=a.result.sentiment.document.label,o=((100*Math.abs(a.result.sentiment.document.score)).toFixed(2),{text:e.data.text});t.youCheck;console.log(o.text),console.log("below should be keywords"),console.log(a.result.keywords);var r=a.result.keywords.length;console.log(r);var c=[t.state.contentCheck,t.state.feelCheck,t.state.whyCheck,t.state.sentimentCheck],s=[function(){console.log("running contentCheck"),o.text&&(t.setState({contentCheck:!0}),console.log("contentcheck"+t.state.contentCheck)),t.state.contentCheck?setTimeout(function(){return t._sendMessage("Im sorry to hear that, how does that make you feel?")},500,console.log("run if true"+t.state.feelCheck)):setTimeout(function(){return t._sendMessage("Try repharsing it")},500,t.setState({contentCheck:!0}),console.log("run if false"+t.state.feelCheck))},function(){console.log("running feelingCheck"),o.text.toLowerCase().includes("feel")&&(t.setState({feelCheck:!0}),console.log("feelcheck"+t.feelCheck)),t.state.feelCheck?setTimeout(function(){return t._sendMessage("I see, why do you feel that way?")},500,console.log("run if true"+t.state.feelCheck)):setTimeout(function(){return t._sendMessage('Try using the keyword "feel" in your statement')},500,console.log("run if false"+t.state.feelCheck))},function(){var e;console.log("running whyCheck"),e=r,console.log("updating score...."),t.setState({b:e}),console.log("a state: "+t.state.a+" b state: "+t.state.b),t.state.b>t.state.a?(console.log("this statement is longer than the last one"+t.state.b+">"+t.state.a),t.setState({a:t.state.b,b:0,scoreCheck:!0}),console.log("a should be a num"+t.state.a)):console.log("be more descriptive"+t.state.b+"<"+t.state.a),t.state.scoreCheck&&(t.setState({whyCheck:!0}),console.log("whycheck is"+t.whyCheck)),t.state.whyCheck?setTimeout(function(){return t._sendMessage("Now thats try to resolve the conflict, what can the other person do next time?")},500,console.log("run if whycheck true"+t.state.feelCheck)):setTimeout(function(){return t._sendMessage("Try being more descriptive about the situation or elaborate on how you feel")},500,t.setState({youCheck:!0}),console.log("run if whycheck false"+t.state.whyCheck))},function(){var e=a.result.emotion.document.emotion,n=[];for(var o in e)n.push({emotion:o,value:e[o]});n.sort(function(e,t){return t.value-e.value}),setTimeout(function(){return t._sendMessage("Based on what you said, you may come across as ".concat(l," to the other person."))},500),setTimeout(function(){return t._sendMessage("It sounds like you're feeling more ".concat(n[0].emotion,". We can revise your statement if you want, otherwise you're ready to tell this to the other person!"))},1500),console.log(t.state.messageList)}],i=["youStatementCheck1","contentCheck","youStatementCheck2","feelCheck","youStatementCheck3","whyCheck","youStatementCheck","sentimentCheck"];!function(){t.setState({description:o.text}),console.log("aaaaaaaaaaaa"+t.state.description);var e={username:t.state.username,description:t.state.description,duration:t.state.duration,date:t.state.date};console.log(e),p.a.post("/exercises/add",e).then(function(e){return console.log("data has been saved"+e.data)});for(var n=0;n<c.length;n++){if(console.log("----run loop----"+c[n]),console.log(i[n]+" "+c[n]),!0===o.text.toLowerCase().includes("you"))return setTimeout(function(){return t._sendMessage('Try not to use "you" in your statement')},500,console.log("run if true"+t.state.youCheck));if(!1===c[n])return s[n](o.text)}}()}).catch(function(e){console.log("error:",e)})}},{key:"componentDidMount",value:function(){this.checkUser();var e="Hi there! I'm here to help resolve your conflict through I-statements. Before we start, tell me what happened."+this.state.user;this._sendMessage(e)}},{key:"_sendMessage",value:function(e){e.length>0&&this.setState({messageList:[].concat(Object(O.a)(this.state.messageList),[{author:"them",type:"text",data:{text:e}}])}),console.log(e)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(x.a,{agentProfile:{teamName:"SentiBot",imageUrl:"https://cdn.dribbble.com/users/722835/screenshots/4082720/bot_icon.gif"},onMessageWasSent:this._onMessageWasSent.bind(this),messageList:this.state.messageList,showEmoji:!0}))}}]),t}(a.Component)),L=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(k,null),l.a.createElement("h4",null,"Welcome to Home"),l.a.createElement(S,{currentUser:{id:12345,name:"Test"}}))}}]),t}(a.Component),U=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h4",null,"Create An Account"),l.a.createElement("button",{onClick:function(){return window.location="/home"}},"Sign up!"))}}]),t}(a.Component),N=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"jumbotron",style:{marginTop:"75px"}},l.a.createElement("h1",{className:"display-4"},"Sentibot"),l.a.createElement("p",{className:"lead"},"Having trouble resolving a conflict? We're here to help :)"),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("p",null,"We use machine learning to guide you through assertive conflict resolution methods. Powered by IBM watson applied theories."),l.a.createElement("p",{className:"lead"},l.a.createElement("a",{className:"btn btn-primary btn-sm",href:"#",role:"button"},"Learn more"))))}}]),t}(a.Component),M=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(k,null),l.a.createElement(N,null),l.a.createElement("h4",null,"Welcome to landing page"))}}]),t}(a.Component);var I=function(){return l.a.createElement(c.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(s.d,null,l.a.createElement(s.b,{exact:!0,path:"/",component:M}),l.a.createElement(s.b,{exact:!0,path:"/login",component:y}),l.a.createElement(s.b,{exact:!0,path:"/history",component:j}),l.a.createElement(s.b,{exact:!0,path:"/home",component:L}),l.a.createElement(s.b,{exact:!0,path:"/signup",component:U}))))};r.a.render(l.a.createElement(I,null),document.getElementById("root"))},31:function(e,t,n){},43:function(e,t,n){e.exports=n(102)}},[[43,2,1]]]);
//# sourceMappingURL=main.7a92c2eb.chunk.js.map